Creators.Mobile={Init:function(worker){console.log("Registering service worker...")
if('serviceWorker'in navigator&&'PushManager'in window){window.addEventListener('load',function(){navigator.serviceWorker.register(worker).then(function(registration){console.log('ServiceWorker registration successful with scope: ',registration.scope);if(Notification.permission=='default'){Notification.requestPermission(result=>{console.log("Notifications Enabled");Creators.Mobile.Notify({title:"Notifications Enabled!"})});}},function(err){console.log('ServiceWorker registration failed: ',err);});});}},Share:function(url){if(navigator.share){navigator.share({url,}).then(()=>console.log('Successful share')).catch((error)=>console.log('Error sharing',error));}else{alert("Sharing is not supported");}},Notify:function(data){if(Notification.permission=='granted'){navigator.serviceWorker.getRegistration().then(reg=>{reg.showNotification(data.title,Object.assign(data,{timestamp:Date.now(),body:data.content,badge:"/cdn/assets/mobile/images/creators_logo_gear_notify_badge.png?=v1",data:{dateOfArrival:Date.now(),primaryKey:1}}));})}},openFullscreen:function(){if(document.documentElement.requestFullscreen){document.documentElement.requestFullscreen();}else if(document.webkitRequestFullscreen){document.documentElement.webkitRequestFullscreen();}else if(document.msRequestFullscreen){document.documentElement.msRequestFullscreen();}},closeFullscreen:function(){if(document.exitFullscreen){document.exitFullscreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}else if(document.msExitFullscreen){document.msExitFullscreen();}},}