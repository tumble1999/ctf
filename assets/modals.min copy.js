var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
var g_aModals=[],Modal=function(a){var b=this;a=void 0===a?{}:a;for(var k=$jscomp.makeIterator(document.querySelectorAll(".context-menu")),g=k.next();!g.done;g=k.next())g.value.remove();k=$jscomp.makeIterator(g_aModals);for(g=k.next();!g.done;g=k.next())g.value.closeAndKill();g_aModals=[];g_aModals.push(this);this.onready=a.onready;this.onclose=a.onclose;this.onanswer=a.onanswer;this.innerText=a.innerText;this.innerHTML=a.innerHTML;this.buttons=a.buttons||[];this.parent=new ModalContainer;this.options=
a.options||{};var m;this.options.no_overflow=null!=(m=this.options.no_overflow)?m:!1;this.name=a.name;!0===this.options.closeFromContainer&&(this.parent.DOM.onclick=function(d){d.target==d.currentTarget&&b.closeAndKill()});this.DOM=document.createElement("div");this.DOM.object=this;this.DOM.className="modal container visible";null!=this.options.width&&(this.DOM.style.maxWidth=this.options.width);!0===this.options.error&&this.DOM.classList.add("shake");this.DOM.prepend(function(){var d=document.createElement("div");
d.className="modal-header";!0===b.options.error&&(d.style.background="#f002");!0===b.options.closeFromButton&&d.prepend(function(){var c=document.createElement("div");c.className="modal-x";c.innerText="X";c.onclick=function(h){h.target==h.currentTarget&&b.closeAndKill()};return c}());d.prepend(function(){var c=document.createElement("h2");c.innerText=b.name;return c}());return d}());this.DOM.append(function(){var d=document.createElement("div");d.className="modal-content";d.prepend(function(){if(b.innerHTML){var c=
document.createElement("div");c.innerHTML=b.innerHTML;c.style=b.options.style;null!=b.options.height&&(b.options.content_only||b.options.no_overflow||(c.style.overflowY="auto"),c.style.height=b.options.height);return c}if(b.innerText)return c=document.createElement("p"),c.innerHTML=b.innerText,c.style=b.options.style,c}());d.append(function(){if(b.options.content_only)return"";var c=document.createElement("div");c.className="modal-footer";!0===b.options.loading&&c.classList.add("loading");for(var h=
{},n=$jscomp.makeIterator(b.buttons),l=n.next();!l.done;h={$jscomp$loop$prop$c$8:h.$jscomp$loop$prop$c$8},l=n.next())h.$jscomp$loop$prop$c$8=l.value,c.prepend(function(f){return function(){var e=document.createElement("div"),p;e.className=null!=(p=f.$jscomp$loop$prop$c$8.class)?p:"tf-button2";e.innerText=f.$jscomp$loop$prop$c$8.value;e.innerHTML=f.$jscomp$loop$prop$c$8.icon?'<i class="mdi mdi-'+f.$jscomp$loop$prop$c$8.icon+'"></i> <label>'+e.innerText+"</label>":"<label>"+e.innerText+"</label>";f.$jscomp$loop$prop$c$8.timeout&&
(e.setAttribute("disabled",""),setTimeout(function(){e.removeAttribute("disabled")},f.$jscomp$loop$prop$c$8.timeout));e.onclick=function(q){e.hasAttribute("disabled")||("function"==typeof f.$jscomp$loop$prop$c$8.onclick?(f.$jscomp$loop$prop$c$8.onclick.call(b),b.closeAndKill(!1)):b.closeAndKill(!0))};return e}}(h)());return c}());return d}());this.parent.DOM.prepend(this.DOM);this.DOM.addEventListener("webkitAnimationEnd",function(){this.style.animationNam=""},!1);this.open();this.adjustHeight()};
Modal.prototype.adjustHeight=function(){this.DOM.style.height="calc("+this.DOM.scrollHeight+"px + 1rem)"};
Modal.prototype.open=function(){this.parent.DOM.style.background="#0009";this.parent.DOM.style.pointerEvents="all";this.DOM.classList.remove("modal-popin");this.DOM.classList.remove("modal-popout-error");this.DOM.classList.remove("modal-popout");1==this.options.error?this.DOM.classList.add("modal-popout-error"):this.DOM.classList.add("modal-popout");this.options.content_only&&(this.DOM.querySelector(".modal-header").remove(),this.DOM.querySelector(".modal-content").style.padding=0,this.DOM.querySelector(".modal-content").style.overflowY=
"none");this.DOM.style.pointerEvents="all";if("function"==typeof this.onready)this.onready()};Modal.prototype.close=function(a){a=void 0===a?!0:a;this.parent.DOM.style.background="#0000";this.parent.DOM.style.pointerEvents="none";this.DOM.classList.remove("modal-popin");this.DOM.classList.remove("modal-popout-error");this.DOM.classList.remove("modal-popout");this.DOM.style.pointerEvents="none";if(1==a&&"function"==typeof this.onclose)this.onclose()};
Modal.prototype.closeAndKill=function(a){var b=this;this.close(a);setTimeout(function(){b.remove()},200)};Modal.prototype.remove=function(){this.parent.DOM.remove()};var ModalContainer=function(){this.DOM=document.createElement("div");this.DOM.className="modal-container";document.querySelector("#core").prepend(this.DOM);this.DOM.style.pointerEvents="all"};
